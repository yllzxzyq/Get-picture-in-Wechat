### TCP/IP参考模型

应用层：HTTP SMTP DNS RTP

运输层：       TCP              UDP

网际层：                   IP

网络接口层：



### 5层参考模型

- 应用层（报文）：支持网络应用 HTTP(HTML)、SMTP(POP、IMAP)、DNS、RTP
- 传输层（段）：进程-进程的数据传输 TCP（拥塞控制)、UDP      **Socket编程**
- 网络层（数据报）：源主机到目的主机 IP
- 数据链路层（数据帧）：
- 物理层（比特）：

#### 网络应用：网络环境，体系结构

###### 客户机/服务器结构（C/S）：

服务器:

- 24小时提供服务
- 永久性访问地址
- 大量服务器实现可扩展性

客户机：

相互不通信

###### Web-万维网-浏览器（HTTP）

###### 点对点结构（P2P）

- 没有永久服务器
- 任意节点可以直接通信
- 节点间歇性访问网络
- 节点可以改变IP地址

###### 混合结构

能否将两种结构混合？

文件传输用P2P

文件搜索采用C/S结构——集中式

#### 网络应用进程通信

客户机进程：

服务器进程：

###### 进程：主机上运行的程序

socket：进程间通信利用套接字发送和接收消息

**传输基础设施进程提供API**

**传输协议的选择**

**参数设置**

###### 寻址进程：不同主机的进程间通信

###### 第一步

寻址主机——IP地址

###### 第二步u

端口号——为主机每个需要通信的进程分配一个端口号

HTTP：80

Mail：25

#### 应用层协议

网络应用遵循应用层协议

公开协议

- 由RFC定义
- 允许互操作
- HTTP，SMTP...

私有协议

- 多数P2P文件共享应用

协议内容

- 消息的类型
- 消息的语法格式
- 字段的语义
- 规则

##### 网络应用对传输服务的需求

- 数据丢失/可靠性
- 时间/延迟
- 带宽
- 安全性等

###### Internet传输服务

TCP：

- 面向连接：C/S间需要建立连接
- 可靠的传输
- 流量控制：发送方不超过接收方速率
- 拥塞控制：网络负载过重时能够限制发送方的速度
- 不提供时延保障
- 不提供最小带宽保障

UDP：

- 无连接
- 不可靠的数据传输



#### Web应用

- 网页
- 网页互相链接

网页包含多个文件：

对象：HTML文件、图片、视频文件、动态脚本等

对象的寻址

URL：统一资源定位器

Scheme：http//**host**:**port**/path

###### HTTP协议：超文本传输协议（无状态协议）基于TCP协议

###### C/S结构

客户-Browser

服务器-Web Server

###### 无状态协议：服务器不维护任何有关客户端过去所发请求的信息

有状态的协议更加复杂



##### TCP连接建立

持久性连接

- 发送响应后，服务器保持TCP连接
- 后续的HTTP消息可以通过这个连接发送

HTTP协议消息：

##### 请求消息：

ASCII：人直接可读

第一行request line:

```ASCII
GET/URL HTTP/1.1
Host:
User-agent:
Connection:
Accept-language
```

POST方法：

- 网页经常填写表格
- 在请求消息体上传客户端的输入

URL方法

- 使用GET方法
- 输入信息通过request行的URL字段上传

HTTP/1.0      GET  POST  HEAD

HTTP/1.1      以上  另加PUT  DELETE

##### 响应消息

```
HTTP/1.1 200 OK
Connection:
Date:
Server:
Last-modified:
Content-Length:
Content-Type:
```



